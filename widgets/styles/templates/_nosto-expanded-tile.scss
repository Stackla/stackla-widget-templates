@use "@styles/partials/media-queries";

// Shared expanded tile styles for nosto-style widgets (nosto-two, storyline, shortvideo)
// Extracted from nosto-two/components/_expanded-tile.scss

expanded-tiles:not(:empty) {
  min-width: 100%;

  .swiper-3d {
    align-items: stretch;
  }

  @include media-queries.breakpoint(mobile) {
    width: 100%;
  }

  @include media-queries.breakpoint(tablet) {
    width: 100%;
    height: 100dvh;
  }

  .expanded-tile-wrapper {
    --swiper-navigation-top-offset: calc(50% - 20px);
    --container-max-width: 500px;
    --container-max-height: 750px;

    @include media-queries.breakpoint(mobile) {
      --container-max-width: 100%;
      --container-max-height: 100%;
    }

    @include media-queries.breakpoint(tablet) {
      --container-max-width: 100%;
      --container-max-height: 100%;
    }

    max-height: var(--container-max-height) !important;
    max-width: var(--container-max-width) !important;

    .swiper .swiper-wrapper .swiper-slide.ugc-tile .panel-active .image-wrapper .image-wrapper-inner div.image {
        display: flex;
        position: relative;
        justify-content: stretch;
        align-items: stretch;
        width: 100%;
    }

    .fb-content-wrapper {
      height: 100dvh !important;
    }
    
    .fb-video-iframe {
      width: 100%;
      height: 100%;
      border: none;
      position: absolute;
      inset: 0;
      z-index: 9;
    }

    .story-progress-wrapper {
      top: 0;
      justify-content: stretch;
      margin-top: 0;
  
      .story-autoplay-progress {
        width: 100%;
      }
    }

    .close-cross {
      width: 40px;
      height: 40px;
      background-image: url("data:image/svg+xml,%3Csvg%20width%3D%2240%22%20height%3D%2240%22%20viewBox%3D%220%200%20138%20138%22%20fill%3D%22none%22%20xmlns%3D%22http://www.w3.org/2000/svg%22%3E%3Crect%20x%3D%220.603516%22%20y%3D%220.80542%22%20width%3D%22137.133%22%20height%3D%22137.133%22%20rx%3D%2226.2995%22%20fill%3D%22black%22%20fill-opacity%3D%220.8%22/%3E%3Cpath%20d%3D%22M43.3672%2049.6923L49.6493%2043.5674L70.5889%2063.9841L91.5287%2043.5674L97.8105%2049.6923L76.8709%2070.1093L97.8105%2090.5261L91.5287%2096.6512L70.5889%2076.2343L49.6493%2096.6512L43.3672%2090.5261L64.3071%2070.1093L43.3672%2049.6923Z%22%20fill%3D%22white%22/%3E%3C/svg%3E");
      background-repeat: no-repeat;
    }

    .back {
      margin-left: 16px;
    }

    .exit {
      top: 20px;
      right: 20px;

      @include media-queries.breakpoint(mobile) {
        top: 20px;
        right: 20px;
      }
  
      @include media-queries.breakpoint(tablet) {
        top: 20px;
        right: 20px;
      }
    }

    .swiper {
      .swiper-wrapper .swiper-slide .panel-active inline-products {
        height: auto !important;
        bottom: 5px !important;
    
        .expand-control,
        .swiper-pagination-bullet {
          display: none !important;
        }
  
        .swiper-inline-products-button-next {
          right: 20%;
          width: 40px;
          top: 0;
          bottom: 0;
          display: flex;
          align-items: center;
          justify-content: center;
          height: auto !important;
          margin: 0 !important;
  
          .icon-next {
            width: 40px;
            height: 40px;
            background-image: url("data:image/svg+xml,%3Csvg%20width%3D%2240%22%20height%3D%2240%22%20viewBox%3D%220%200%2091%2092%22%20fill%3D%22none%22%20xmlns%3D%22http://www.w3.org/2000/svg%22%3E%3Ccircle%20cx%3D%2245.1446%22%20cy%3D%2245.1446%22%20r%3D%2244.2928%22%20transform%3D%22matrix(-1%200%200%201%2090.7051%200.875977)%22%20stroke%3D%22white%22%20stroke-width%3D%221.70357%22/%3E%3Cpath%20d%3D%22M28.3613%2046.5585H62.2201M62.2201%2046.5585L52.0087%2036.3472M62.2201%2046.5585L52.5462%2055.695%22%20stroke%3D%22white%22%20stroke-width%3D%223.40714%22%20stroke-linecap%3D%22round%22/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            display: block !important;
          }
        }
  
        .swiper-inline-products-button-prev {
          top: 0;
          left: 65px;
          display: none;
  
          .icon-prev {
            width: 40px;
            height: 40px;
            background-image: url("data:image/svg+xml,%3Csvg%20width%3D%2240%22%20height%3D%2240%22%20viewBox%3D%220%200%2091%2092%22%20fill%3D%22none%22%20xmlns%3D%22http://www.w3.org/2000/svg%22%3E%3Ccircle%20cx%3D%2245.1446%22%20cy%3D%2245.1446%22%20r%3D%2244.2928%22%20transform%3D%22matrix(-1%200%200%201%2090.7051%200.875977)%22%20stroke%3D%22white%22%20stroke-width%3D%221.70357%22/%3E%3Cpath%20d%3D%22M28.3613%2046.5585H62.2201M62.2201%2046.5585L52.0087%2036.3472M62.2201%2046.5585L52.5462%2055.695%22%20stroke%3D%22white%22%20stroke-width%3D%223.40714%22%20stroke-linecap%3D%22round%22/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            transform: rotate(180deg);
          }
        }
  
        .swiper-inline-products .tile-product {
          img {
            cursor: pointer;
          }

          background-color: var(--color-secondary) !important;

          .stacklapopup-product-mobile-overlay-link {
            display: none;

            @include media-queries.breakpoint(mobile) {
              display: block;
              position: absolute;
              inset: 0;
              z-index: 1;
            }
          
            @include media-queries.breakpoint(tablet) {
              display: block;
              position: absolute;
              inset: 0;
              z-index: 1;
            }
          }
  
          .tile-product-left-panel {
            .inline-product-img {
              border-radius: 10px;
            }
          }
  
          .tile-product-right-panel {
            color: var(--color-white) !important;
            display: flex;
            justify-content: space-around;
            align-items: stretch;
            flex-direction: column;
  
            .stacklapopup-inline-products-item-button-wrap {
              border-radius: 20px !important;
              background-color: var(--color-white) !important;
              vertical-align: middle;
              display: flex !important;
              align-items: center;
              justify-content: center;
              padding: 10px 10px 8px !important;
      
              .stacklapopup-inline-products-item-button {
                color: var(--color-primary) !important;
                font-size: 14px !important;
                line-height: 1 !important;
                text-transform: uppercase !important;
                font-weight: var(--paragraph-font-weight-medium) !important;
              }
            }

            .stacklapopup-inline-products-item-title,
            .stacklapopup-inline-products-item-price,
            .stacklapopup-inline-products-item-description {
              color: var(--color-white) !important;
            }
  
            .stacklapopup-inline-products-item-title {
              overflow: visible !important;
              text-overflow: unset;
              overflow-wrap: break-word;
              margin-top: 0 !important;
              text-transform: uppercase !important;
              font-weight: var(--paragraph-font-weight-bold) !important;
            }
  
            .stacklapopup-inline-products-item-price {
              margin-top: 16px !important;
            }
  
            .stacklapopup-inline-products-item-description {
              font-weight: var(--paragraph-font-weight-small) !important;
              padding-top: 4px;
            }
          }
        }
      }
    }
  }

  .align-center {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
  }

  .swiper-expanded-button-wrapper {
    position: absolute;
    display: flex;
    align-items: center;
    flex-direction: column;
    gap: 10px;
    z-index: 10;
    width: 40px;
    right: 10px;
    height: 200px;
    justify-content: center;
  
    @include media-queries.breakpoint(mobile) {
      right: 20px;
    }
  
    @include media-queries.breakpoint(tablet) {
      right: 20px;
    }
  }
  
  .swiper-expanded-button-prev,
  .swiper-expanded-button-next {
    width: 40px;
    height: 40px;
    align-items: center;
    justify-content: center;
    background-color: rgb(0 0 0 / 60%);
    border-radius: 6px;
    cursor: pointer;
    display: contents !important;
  }

  tile-content {
    .tile-content-wrapper {
      .header {
        top: 10px !important;

        .share-menu-timephrase-wrapper {
          display: none !important;
        }

        .user-info .user-link {
          gap: 0.6rem;
          line-height: 16px;

          .user-handle {
            color: var(--color-white) !important;
            font-size: var(--user-handle-font-size);
            font-weight: var(--user-handle-font-weight);
          }
        }
      }
    }
  }
}
